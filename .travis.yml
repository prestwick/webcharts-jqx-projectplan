language: node_js
node_js:
- '6'
script:
- npm run test
- npm run lint-style
before_install:
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
before_script:
- npm install
after_success:
- npm run minify
notifications:
  email: false
deploy:
  # deploy to dev
  - provider: s3
    access_key_id: AKIAJU47PGYQQL2G2WCQ
    secret_access_key:
      secure: LiaGBxUzPtrmodtmA2KK3QbFQ4ROTAx4lyaC19kU0eB0hi7/AOIPia1WWhmhIhJsEevyJBSnDv/75bolVRN/dpBPRefu9CQW5wgX/dEk7US+52zrPT5BWsmhlwttqtmD2m7cnU6IY7C8FF/gjJM1uxqq5ToP8RqGeOxYiw+GRkz/Ge+5Nc+Pxk/Y7PQYtuAoU7DLzdhsnkp3DsqjHQwIjMbEp2Q8aBcvbBFuzdxYovBRj1O6YDy3IZxdCH3ZUu35ChwIT8KAB7Jgaqyk354cqU4nXEp1v9L18Bmp/wu+D/az94X5vTul/AQbmGbWJ78HLKzxx2M21NzZnEFPHMhe1jS8mH9YiFqPA/JrICGE1MgAiKJXjTU6r1V/ywyX58Wh4krzJuNOqOqWY/oprdYHMwZXyW62/mREKfsVUIjPhynd863bokJsP2OJlFeynntqGf6BIIaPJk5YNMzv9gcG6hwAYTNUN5D9IY/8TEiohL6XUzWaVfEgtryAS/j15c1xSd9ES/CQNdfNqns9Mih8G2LV6woW+SFerXOvhz8rrJHn+RQF09DYqCQFm0eEHMvUSBKQSfKW1ioZiOgzzWUW94euGgH9Wown0QWGK69AxRCAZvdZvkQg/JltKDbND/WNYdTX1vtuKflbJzfs0kITLDIBaj1WMCZGni9Ih9DvVhA=
    skip_cleanup: true
    bucket: wc-jqx-artifact-repo
    local_dir: min
    upload-dir: latest
    on:
      tags: true
      condition: $TRAVIS_TAG = *dev*
  # deploy  to test
  - provider: s3
    access_key_id: AKIAJU47PGYQQL2G2WCQ
    secret_access_key:
      secure: LiaGBxUzPtrmodtmA2KK3QbFQ4ROTAx4lyaC19kU0eB0hi7/AOIPia1WWhmhIhJsEevyJBSnDv/75bolVRN/dpBPRefu9CQW5wgX/dEk7US+52zrPT5BWsmhlwttqtmD2m7cnU6IY7C8FF/gjJM1uxqq5ToP8RqGeOxYiw+GRkz/Ge+5Nc+Pxk/Y7PQYtuAoU7DLzdhsnkp3DsqjHQwIjMbEp2Q8aBcvbBFuzdxYovBRj1O6YDy3IZxdCH3ZUu35ChwIT8KAB7Jgaqyk354cqU4nXEp1v9L18Bmp/wu+D/az94X5vTul/AQbmGbWJ78HLKzxx2M21NzZnEFPHMhe1jS8mH9YiFqPA/JrICGE1MgAiKJXjTU6r1V/ywyX58Wh4krzJuNOqOqWY/oprdYHMwZXyW62/mREKfsVUIjPhynd863bokJsP2OJlFeynntqGf6BIIaPJk5YNMzv9gcG6hwAYTNUN5D9IY/8TEiohL6XUzWaVfEgtryAS/j15c1xSd9ES/CQNdfNqns9Mih8G2LV6woW+SFerXOvhz8rrJHn+RQF09DYqCQFm0eEHMvUSBKQSfKW1ioZiOgzzWUW94euGgH9Wown0QWGK69AxRCAZvdZvkQg/JltKDbND/WNYdTX1vtuKflbJzfs0kITLDIBaj1WMCZGni9Ih9DvVhA=
    skip_cleanup: true
    bucket: wc-jqx-artifact-repo
    local_dir: min
    upload-dir: $TRAVIS_TAG
    on:
      branch: master
  # deploy to prod
  - provider: npm
    email: "mark.prestwick@gmail.com"
    api_key:
  provider: s3
  access_key_id: AKIAJ3S2L577F6P64SFA
  secret_access_key:secure: XHQdByCRzicW5YLJ5Wmm+mPJZ8DDtxSd8+5Jb9bPdyMHJbUicpjRL0lSu9hGHi79ukMnw0gSGZQLhDumYlqi84yE1fzfBw6vvI+xTOisw7bZuJ7ozbRxO/b8vUyZeI3PVCer1g2hu41CH8TPZAOYV7Tq4S6sGoUg3HcW/pEC4MfbyB1CPx6ituABcMw909ie8xN5/5NLQexD3MQ9wUoD/YgbZ5UkmxKUpTv7dfIZTlG2aOxePiiHh8BCwSwAXeZ1+JPN+AdXvNXB2DZ7AA5Mz1nJxsF3yPboclZ+tpX8BajgAOkuHtVv63AhVL7cWdDgFiZjctIFBhg5KXAIV0WIeuc6m6Y+KcQllQo5a76sEL/Q2SJuCy8JtdEilsijn3sq+nAG8JczmVtz7P8NQ6LH+gXqUNSf7JGedb8aGYDaGt3jCOMr3RpFu3Bt2zWLoX6ABngpUUhHujk+5MdN9yuJ3AiWbCPrmhODlDExpO6Itrafid/MlKMx6iIah8NSbBnkW5xS6Ao45xufupJZemMJF3ruJQQLGbwxAOLIvlxN9RxAr5gyjGfJR8CBB8KMjNumYdYHB/Sm1FJGHvpy97y8IM1Dr7/Gjzdb8t7+5+9CNiGHOK4QIOP6prHWuQxpGa8itFQGy53XBr+oltg5LfgSYIwVolXflRCB0rbencMomUw=
  acl: public_read
  on:
    repo: prestwick/webcharts-jqx-projectplan
    branch: master

  # deploy  to test
  provider: s3
  access_key_id: AKIAJ3S2L577F6P64SFA
  secret_access_key:secure: XHQdByCRzicW5YLJ5Wmm+mPJZ8DDtxSd8+5Jb9bPdyMHJbUicpjRL0lSu9hGHi79ukMnw0gSGZQLhDumYlqi84yE1fzfBw6vvI+xTOisw7bZuJ7ozbRxO/b8vUyZeI3PVCer1g2hu41CH8TPZAOYV7Tq4S6sGoUg3HcW/pEC4MfbyB1CPx6ituABcMw909ie8xN5/5NLQexD3MQ9wUoD/YgbZ5UkmxKUpTv7dfIZTlG2aOxePiiHh8BCwSwAXeZ1+JPN+AdXvNXB2DZ7AA5Mz1nJxsF3yPboclZ+tpX8BajgAOkuHtVv63AhVL7cWdDgFiZjctIFBhg5KXAIV0WIeuc6m6Y+KcQllQo5a76sEL/Q2SJuCy8JtdEilsijn3sq+nAG8JczmVtz7P8NQ6LH+gXqUNSf7JGedb8aGYDaGt3jCOMr3RpFu3Bt2zWLoX6ABngpUUhHujk+5MdN9yuJ3AiWbCPrmhODlDExpO6Itrafid/MlKMx6iIah8NSbBnkW5xS6Ao45xufupJZemMJF3ruJQQLGbwxAOLIvlxN9RxAr5gyjGfJR8CBB8KMjNumYdYHB/Sm1FJGHvpy97y8IM1Dr7/Gjzdb8t7+5+9CNiGHOK4QIOP6prHWuQxpGa8itFQGy53XBr+oltg5LfgSYIwVolXflRCB0rbencMomUw=
  acl: public_read
  on:
    repo: prestwick/webcharts-jqx-projectplan
    branch: release
